(()=>{"use strict";const e=(()=>{class e{constructor(e){this.title=e,this.todos=[],this.projectIndex=null}}let t=[];return{projectList:t,addProject:function(o){const n=new e(o);t.push(n),n.index=t.indexOf(n)},getProjectIndex:function(e){return t.map((e=>e.title)).indexOf(e)},deleteProject:function(e){t.splice(e,1)},editProject:function(e,o,n){t[e][o]=n}}})();e.addProject("Default project");const t=e,o=(()=>{class e{constructor(e,t,o,n,d,r){this.title=e,this.description=t,this.dueDate=new Date(o),this.priority=n,this.completed=d,this.projectIndex=r,this.todoIndex=null}}return{addTodo:function(o,n,d,r,c,i){const a=new e(o,n,d,r,c,i);t.projectList[i].todos.push(a),a.index=t.projectList[i].todos.indexOf(a)},deleteTodo:function(e,o){const n=t.projectList[e].todos;n.splice(o,1),n.forEach((e=>e.index=n.indexOf(e)))},toggleComplete:function(e,o){t.projectList[e].todos[o].completed=!t.projectList[e].todos[o].completed},getTodoIndex:function(e){return t.projectList[t.getProjectIndex("Test project")].todos.map((e=>e.title)).indexOf(e)},editTodo:function(e,o,n,d,r,c){const i=t.projectList[r].todos[c];i.title=e,i.description=o,i.dueDate=n,i.priority=d}}})(),n=(()=>{let e=0;function n(){const e=document.getElementById("content"),t=document.getElementById("add-project-form");e.removeChild(t)}function r(){const e=document.getElementById("content"),t=document.getElementById("add-todo-form");e.removeChild(t)}return{selectProject:function(o){e=t.getProjectIndex(o.target.innerText),d.renderTodos(e)},addNewProject:function(e){e.preventDefault();const o=document.querySelector("input[id=title]");o.reportValidity()&&(t.addProject(o.value),n(),d.renderProjects())},submitTodoForm:function(t){t.preventDefault();const n=document.querySelector("input[id=title]"),c=document.querySelector("textarea[id=description]"),i=document.querySelector("input[id=due-date]"),a=document.querySelector("select[id=priority]");if(n.reportValidity()){if("edit-todo-submit-button"===t.target.id){const d=t.target.parentElement.parentElement.dataset.todoIndex;o.editTodo(n.value,c.value,i.value,a.value,e,d)}else o.addTodo(n.value,c.value,i.value,a.value,!1,e);r(),d.renderTodos(e)}},openAddProjectForm:function(){document.getElementById("add-todo-form")&&r(),document.getElementById("add-project-form")||d.renderAddProjectForm()},closeAddProjectForm:n,openAddTodoForm:function(e){if(document.getElementById("add-project-form")&&n(),!document.getElementById("add-todo-form"))if(e.target.classList.contains("fa-pen-to-square")){const t=e.target.parentElement.parentElement.dataset.todoIndex,o=e.target.parentElement.parentElement.dataset.projectIndex;d.renderAddTodoForm(o,t)}else d.renderAddTodoForm()},closeAddTodoForm:r,deleteTodo:function(e){const t=e.target.parentElement.parentElement.dataset.todoIndex,n=e.target.parentElement.parentElement.dataset.projectIndex;o.deleteTodo(n,t),d.renderTodos(n)},toggleComplete:function(e){e.target.classList.contains("fa-regular")?(e.target.classList.remove("fa-regular"),e.target.classList.add("fa-solid")):(e.target.classList.remove("fa-solid"),e.target.classList.add("fa-regular"));const t=e.target.parentElement.parentElement.dataset.todoIndex,n=e.target.parentElement.parentElement.dataset.projectIndex;o.toggleComplete(n,t)}}})(),d=(()=>{const e=document.getElementById("content");return{contentDiv:e,renderHeader:function(){const e=document.getElementById("header"),t=document.createElement("h1");t.innerText="Todo List",e.appendChild(t)},renderProjects:function(){const e=document.getElementById("projects");e.innerHTML="";const o=document.createElement("button");o.setAttribute("class","add-project-button");const d=document.createElement("img");d.setAttribute("src","./img/add-light.svg");const r=document.createElement("h2");r.innerText="Add new project",o.appendChild(d),o.appendChild(r),o.addEventListener("click",n.openAddProjectForm);const c=document.createElement("div");t.projectList.forEach((function(e){const t=document.createElement("div");t.setAttribute("class","project-name"),t.innerText=e.title,c.appendChild(t)})),e.appendChild(o),e.appendChild(c),document.querySelectorAll(".project-name").forEach((function(e){e.addEventListener("click",n.selectProject)}))},renderTodos:function(e){const o=document.getElementById("todos");o.innerHTML="";const d=document.createElement("button");d.setAttribute("class","add-todo-button");const r=document.createElement("img");r.setAttribute("src","./img/add.svg");const c=document.createElement("h2");c.innerText="Add new todo",d.appendChild(r),d.appendChild(c),d.addEventListener("click",n.openAddTodoForm);const i=document.createElement("div");t.projectList[e].todos.forEach((function(e){const t=document.createElement("div");t.setAttribute("class","todo-name"),t.setAttribute("data-todo-index",e.index),t.setAttribute("data-project-index",e.projectIndex),t.innerText=e.title;const o=document.createElement("div");o.setAttribute("class","icons"),o.innerHTML='<i class="fa-regular fa-circle-check"></i> <i class="fa-solid fa-pen-to-square"></i> <i class="fa-solid fa-trash"></i>',t.appendChild(o),i.appendChild(t)})),o.appendChild(d),o.appendChild(i),document.querySelectorAll(".fa-trash").forEach((e=>e.addEventListener("click",n.deleteTodo))),document.querySelectorAll(".fa-circle-check").forEach((e=>e.addEventListener("click",n.toggleComplete))),document.querySelectorAll(".fa-pen-to-square").forEach((e=>e.addEventListener("click",n.openAddTodoForm)))},renderAddProjectForm:function(){const t=document.createElement("div");t.setAttribute("id","add-project-form");const o=document.createElement("img");o.setAttribute("src","./img/close-light.svg"),o.setAttribute("class","close-button"),o.addEventListener("click",n.closeAddProjectForm);const d=document.createElement("form");d.setAttribute("action","#"),d.setAttribute("id","form");const r=document.createElement("div");r.setAttribute("class","form-item");const c=document.createElement("label");c.setAttribute("for","title");const i=document.createTextNode("Project title:");c.appendChild(i);const a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("id","title"),a.setAttribute("name","title"),a.required=!0;const s=document.createElement("button");s.setAttribute("class","submit-button");const l=document.createTextNode("Submit");s.appendChild(l),s.addEventListener("click",n.addNewProject),r.appendChild(c),r.appendChild(a),d.appendChild(r),d.appendChild(s),t.appendChild(o),t.appendChild(d),e.appendChild(t)},renderAddTodoForm:function(o,d){const r=document.createElement("div");r.setAttribute("id","add-todo-form");const c=document.createElement("img");c.setAttribute("src","./img/close-light.svg"),c.setAttribute("class","close-button"),c.addEventListener("click",n.closeAddTodoForm);const i=document.createElement("form");i.setAttribute("action","#"),i.setAttribute("id","form");const a=document.createElement("div");a.setAttribute("class","form-item");const s=document.createElement("label");s.setAttribute("for","title");const l=document.createTextNode("Todo title:");s.appendChild(l);const u=document.createElement("input");u.setAttribute("type","text"),u.setAttribute("id","title"),u.setAttribute("name","title"),u.required=!0;const m=document.createElement("div");m.setAttribute("class","form-item");const p=document.createElement("label");p.setAttribute("for","description");const f=document.createTextNode("Todo description:");p.appendChild(f);const E=document.createElement("textarea");E.setAttribute("id","description"),E.setAttribute("name","description");const h=document.createElement("div");h.setAttribute("class","form-item");const b=document.createElement("label");b.setAttribute("for","due-date");const A=document.createTextNode("Todo due date:");b.appendChild(A);const g=document.createElement("input");g.setAttribute("type","date"),g.setAttribute("id","due-date"),g.setAttribute("name","due-date");const j=document.createElement("div");j.setAttribute("class","form-item");const C=document.createElement("label");C.setAttribute("for","priority");const T=document.createTextNode("Todo priority:");C.appendChild(T);const v=document.createElement("select");v.setAttribute("id","priority"),v.setAttribute("name","priority"),["Not urgent","Normal","Urgent"].forEach((function(e){let t=document.createElement("option");t.setAttribute("value",e);let o=document.createTextNode(e);t.appendChild(o),v.appendChild(t)}));const x=document.createElement("button");x.setAttribute("class","submit-button");const y=document.createTextNode("Submit");if(x.appendChild(y),x.addEventListener("click",n.submitTodoForm),a.appendChild(s),a.appendChild(u),m.appendChild(p),m.appendChild(E),h.appendChild(b),h.appendChild(g),j.appendChild(C),j.appendChild(v),i.appendChild(a),i.appendChild(m),i.appendChild(h),i.appendChild(j),i.appendChild(x),r.appendChild(c),r.appendChild(i),e.appendChild(r),2===arguments.length){const e=t.projectList[o].todos[d];u.value=e.title,E.value=e.description,g.value=e.dueDate,v.value=e.priority,x.setAttribute("id","edit-todo-submit-button"),r.setAttribute("data-todo-index",d)}}}})();t.addProject("Test project"),o.addTodo("test","test description",new Date,"important",!1,1),o.addTodo("test2","another test description",new Date,"not important",!1,1),d.renderHeader(),d.renderProjects()})();